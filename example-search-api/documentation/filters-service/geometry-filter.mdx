---
title: Geometry Filter
titleTags:
  - label: 'Service version: 2'
    color: grey5
  - label: 'Last edit: 2022.12.13'
    color: grey5
---

## Purpose

The Geometry Filter endpoint becomes handy when a list of POIs is already available and needs to be filtered using a list of geometries. It will return POIs that lie within any of the geometries. The Geometry and POI lists can be sent via a `POST` or `GET` request. `POST` is recommended for large datasets. For example:

```json [type=get] [title=poiList array (JSON)]
[
  {
    "poi": {
      "name": "S Restaurant Toms"
    },
    "address": {
      "freeformAddress": "2880 Broadway, New York, NY 10025"
    },
    "position": {
      "lat": 40.80558,
      "lon": -73.96548
    }
  },
  {
    "poi": {
      "name": "Yasha Raman Corporation"
    },
    "address": {
      "freeformAddress": "940 Amsterdam Ave, New York, NY 10025"
    },
    "position": {
      "lat": 40.80076,
      "lon": -73.96556
    }
  }
]
```

```json [type=get] [title=geometryList array (JSON)]
[
  {
    "type": "CIRCLE",
    "position": "40.80558, -73.96548",
    "radius": 100
  },
  {
    "type": "POLYGON",
    "vertices": [
      "37.7524152343544, -122.43576049804686",
      "37.70660472542312, -122.43301391601562",
      "37.712059855877314, -122.36434936523438",
      "37.75350561243041, -122.37396240234374"
    ]
  }
]
```

```json [type=post] [title=POST body (JSON) containing the poiList and geometryList arrays]
{
  "poiList": [
    {
      "poi": {
        "name": "S Restaurant Tom's"
      },
      "address": {
        "freeformAddress": "2880 Broadway, New York, NY 10025"
      },
      "position": {
        "lat": 40.80558,
        "lon": -73.96548
      }
    },
    {
      "poi": {
        "name": "Yasha Raman Corporation"
      },
      "address": {
        "freeformAddress": "940 Amsterdam Ave, New York, NY 10025"
      },
      "position": {
        "lat": 40.80076,
        "lon": -73.96556
      }
    }
  ],
  "geometryList": [
    {
      "type": "CIRCLE",
      "position": "40.80558,-73.96548",
      "radius": 100
    },
    {
      "type": "POLYGON",
      "vertices": [
        "37.7524152343544,-122.43576049804686",
        "37.70660472542312,-122.43301391601562",
        "37.712059855877314,-122.36434936523438",
        "37.75350561243041,-122.37396240234374"
      ]
    }
  ]
}
```

### Run this endpoint

You can easily run this and other endpoints. Go to the Example  [API Explorer](/search-api/api-explorer/)  page and follow the directions.

## Request data

### HTTPS Methods: `GET` or `POST`

- Constants and parameters enclosed in curly brackets &#123; &#125; **must be replaced** with their values.
- Please see the following [Request parameters](#request-parameters) section with the required and optional parameters tables for their values. The generic request format is as follows.

```shell [type=get] [title=GET URL request format]
https://{baseURL}/search/{versionNumber}/geometryFilter.{ext}?key={Your_API_Key}&geometryList={geometryList}&poiList={poiList}
```

```shell [type=get] [title=GET URL request example]
https://api.Example.com/search/2/geometryFilter.json?key={Your_API_Key}&geometryList=[
  {
    "type": "CIRCLE",
    "position": "40.80558, -73.96548",
    "radius": 100
  },
  {
    "type": "POLYGON",
    "vertices": [
      "37.7524152343544, -122.43576049804686",
      "37.70660472542312, -122.43301391601562",
      "37.712059855877314, -122.36434936523438",
      "37.75350561243041, -122.37396240234374"
    ]
  }
]
&poiList=[
  {
    "poi": {
      "name": "S Restaurant Toms"
    },
    "address": {
      "freeformAddress": "2880 Broadway, New York, NY 10025"
    },
    "position": {
      "lat": 40.80558,
      "lon": -73.96548
    }
  },
  {
    "poi": {
      "name": "Yasha Raman Corporation"
    },
    "address": {
      "freeformAddress": "940 Amsterdam Ave, New York, NY 10025"
    },
    "position": {
      "lat": 40.80076,
      "lon": -73.96556
    }
  }
]
```

```shell [type=get] [title=GET curl command request format]
curl 'https://api.Example.com/search/2/geometryFilter.json?key={Your_API_Key}&geometryList=[
  {
    "type": "CIRCLE",
    "position": "40.80558, -73.96548",
    "radius": 100
  },
  {
    "type": "POLYGON",
    "vertices": [
      "37.7524152343544, -122.43576049804686",
      "37.70660472542312, -122.43301391601562",
      "37.712059855877314, -122.36434936523438",
      "37.75350561243041, -122.37396240234374"
    ]
  }
]
&poiList=[
  {
    "poi": {
      "name": "S Restaurant Toms"
    },
    "address": {
      "freeformAddress": "2880 Broadway, New York, NY 10025"
    },
    "position": {
      "lat": 40.80558,
      "lon": -73.96548
    }
  },
  {
    "poi": {
      "name": "Yasha Raman Corporation"
    },
    "address": {
      "freeformAddress": "940 Amsterdam Ave, New York, NY 10025"
    },
    "position": {
      "lat": 40.80076,
      "lon": -73.96556
    }
  }
]'
```

### Request parameters

The following table describes the parameters that can be used in a request.

- Required parameters **must** be used or the call will fail.
- Optional parameters _may_ be used.

**Note:** There are no optional parameters in this endpoint.

<table>
  <thead>
    <tr>
      <th scope="col" style={{ fontSize: '1em' }} width="250px;">Required parameters</th>
      <th scope="col" style={{ fontSize: '1em' }}>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>
         `baseURL`<br />
         *string*
      </th>
      <td>
        Base URL for calling the API.<br />
         **Values:**
        <ul>
          <li>
             `api.Example.com`
          </li>
          <li>
             `kr-api.Example.com`  (see the
             [Region-specific content](/search-api/documentation/product-information/region-specific-content)
            page)
          </li>
        </ul>
      </td>
    </tr>
    <tr>
      <th scope="row">
         `versionNumber`<br />
         *string*
      </th>
      <td>
        The service version number.<br />
         **Value:**  The current value is  `2`.
      </td>
    </tr>
    <tr>
      <th scope="row">
         `ext`<br />
         *string*
      </th>
      <td>
        A valid response format:<br />
         **Values:**   `json` ,  `jsonp` ,  `js` ,
        or  `xml`
      </td>
    </tr>
    <tr>
      <th scope="row">
         `geometryList`<br />
         *array*
      </th>
      <td>
        List (JSON array) of  **geometries**  to filter by. Available types are
         `POLYGON`  and  `CIRCLE`. Format is as in the above
        xample. The  `Circle`  radius unit is in meters.<br />
         **Value:**  List (JSON array) of geometries.
      </td>
    </tr>
    <tr>
      <th scope="row">
         `poiList`<br />
         *array*
      </th>
      <td>
        List (JSON array) of  **POIs**  to filter by. Format is as in the above
        example. The only required attribute of a POI is  `position`.
        Everything else is optional and will be echoed back when passed in.<br />
         **Value:**  List (JSON array) of POIs.
         **position  example:**   `37.553,-122.453`
      </td>
    </tr>
    <tr>
      <th scope="row">
         `key`<br />
         *string*
      </th>
      <td>
        An API Key valid for the requested service.<br />
         **Value:**  Your valid  `API Key`.
      </td>
    </tr>
  </tbody>
</table>

### Request headers

<table>
  <thead>
    <tr>
      <th scope="col" style={{ fontSize: '1em' }} width="250px;">Optional headers</th>
      <th scope="col" style={{ fontSize: '1em' }}>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">
         [Accept-Encoding](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding)
      </th>
      <td>
        Enables response compression.<br />
         **Value:**   `gzip`
      </td>
    </tr>
  </tbody>
</table>  

## Response data

### Response body

For illustrative purposes the example below is neatly indented and includes all possible response fields. Actual responses are more compact and the fields present will vary based on the result type and the data available. See the following response fields section for more information. When requesting JSON output the response has the following structure:

```json [title=Response body structure - JSON]
{
  "summary": {
    "numResults": 1,
    "queryTime": 0
  },
  "results": []
}
```

Each element of the `results` array is in the following format:

```json [title=results array elements format - JSON]
{
  "poi": {
    "name": "Upper Crust Pizza & Pasta"
  },
  "address": {
    "freeformAddress": "2501 Soquel Dr, Santa Cruz, CA 95065"
  },
  "position": {
    "lat": "36.98844",
    "lon": "-121.97483"
  }
}
```

### Response fields

The following table describes all of the fields that can appear in a response. Fields are listed by the response section they belong to and in the order that they appear in the response.

<table>
  <thead>
    <tr>
      <th colspan="2" style={{ fontSize: '1em' }}>Primary fields</th>
    </tr>
    <tr>
      <th scope="col" width="250px;">Field</th>
      <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">
         `summary`<br />
         *object*
      </th>
      <td>Summary information about the search that was performed.</td>
    </tr>
    <tr>
      <th scope="row">
         `results`<br />
         *array*
      </th>
      <td>Result list, sorted in descending order by score.</td>
    </tr>
    <tr>
      <th colspan="2" style={{ fontSize: '1em' }}>summary object</th>
    </tr>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
    <tr>
      <th scope="row">
         `numResults`<br />
         *integer*
      </th>
      <td>Number of results in the response.</td>
    </tr>
    <tr>
      <th scope="row">
         `queryTime`<br />
         *integer*
      </th>
      <td>Time spent on resolving the query.</td>
    </tr>
    <tr>
      <th colspan="2" style={{ fontSize: '1em' }}>results array</th>
    </tr>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
    <tr>
      <th scope="row">
         `poi`<br />
         *object*
      </th>
      <td>
        Information about the Points of Interest in the result. This is an
        optional section, and is only present if type ==  **POI**.<br />
         [poi](#poi-object)  object
      </td>
    </tr>
    <tr>
      <th scope="row">
         `address`<br />
         *object*
      </th>
      <td>Structured address for the result.</td>
    </tr>
    <tr>
      <th scope="row">
         `position`<br />
         *object*
      </th>
      <td>
        Position of the result:<br />
         [LatLon](#latlon)
      </td>
    </tr>
    <tr>
      <th id="poi-object" colspan="2" style={{ fontSize: '1em' }}>poi object</th>
    </tr>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
    <tr>
      <th scope="row">
         `name`<br />
         *string*
      </th>
      <td>Name of the POI.</td>
    </tr>
    <tr>
      <th colspan="2" style={{ fontSize: '1em' }}>address object</th>
    </tr>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
    <tr>
      <th scope="row">
         `freeformAddress`<br />
         *string*
      </th>
      <td>
        An address line formatted according to the formatting rules of the
        result&#39;s country of origin. In the case of countries, its full
        country name.
      </td>
    </tr>
    <tr>
      <th id="latlon" colspan="2" style={{ fontSize: '1em' }}>LatLon</th>
    </tr>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
    <tr>
      <th scope="row">
         `lat`<br />
         *float*
      </th>
      <td>
        Latitude. min/max: -90 to +90<br />
         **Reference:**
         [Latitude, Longitude, and Coordinate System Grids](https://gisgeography.com/latitude-longitude-coordinates/)
      </td>
    </tr>
    <tr>
      <th scope="row">
         `lon`<br />
         *float*
      </th>
      <td>
        Longitude. min/max: -180 to +180<br />
         **Reference:**
         [Latitude, Longitude, and Coordinate System Grids](https://gisgeography.com/latitude-longitude-coordinates/)
      </td>
    </tr>
  </tbody>
</table>

### Response codes

The following data table contains response codes signifying successful and failed requests to an API server.

<table id="response-codes">
  <thead>
    <tr>
      <th scope="col" style={{ fontSize: '1em' }} width="250px;">Code</th>
      <th scope="col" style={{ fontSize: '1em' }}>Meaning &amp; possible causes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">
         `200`
      </th>
      <td>
         **OK** : The search successfully returned zero or more results.
      </td>
    </tr>
    <tr>
      <th scope="row">
         `400`
      </th>
      <td>
         **Bad Request** : One or more parameters were incorrectly specified.
      </td>
    </tr>
    <tr>
      <th scope="row">
         `403`
      </th>
      <td>
         **Forbidden** : Possible causes include
        <ul>
          <li>Service requires SSL</li>
          <li>Not authorized</li>
          <li>Rate or volume limit exceeded</li>
          <li>Unknown referer</li>
        </ul>
      </td>
    </tr>
    <tr>
      <th scope="row">
         `405`
      </th>
      <td>
         **Method Not Allowed** : The HTTPS request method ( `GET` ,
         `POST` , etc.) is not supported for this request.
      </td>
    </tr>
    <tr>
      <th scope="row">
         `404/596`
      </th>
      <td>
         **Not Found** : The HTTPS request method ( `GET` ,
         `POST` , etc.) or path is incorrect.
      </td>
    </tr>
    <tr>
      <th scope="row">
         `5xx`
      </th>
      <td>
         **Server Error** : The service was unable to process your request.
        Contact support to resolve the issue.
      </td>
    </tr>
  </tbody>
</table>

### Response headers

The following data table contains response headers sent back from an API server.

<table>
  <thead>
    <tr>
      <th scope="col" style={{ fontSize: '1em' }} width="250px;">Header</th>
      <th scope="col" style={{ fontSize: '1em' }}>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th scope="row">
         [Access-Control-Allow-Origin](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin)
      </th>
      <td>
        Ensures that clients implementing the CORS security model are able to
        access the response from this service.<br />
         **Value:**  An asterisk  `*`  that signifies access to the
        Example API using the Access-Control-Allow-Origin (ACAO) header in its
        response indicating which origin sites are allowed.
      </td>
    </tr>
    <tr>
      <th scope="row">
         [Content-Type](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type)
      </th>
      <td>
        Indicates the format of the response, as chosen by the client.<br />
         **Format:**   `type/subtype; charset=utf-8`<br />
         **Value:**  type/subtype is one of:  `application/json` ,
         `text/javascript` , or  `text/xml`.
      </td>
    </tr>
    <tr>
      <th scope="row">
         [Content-Encoding](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Encoding)
      </th>
      <td>
        If requested by the client, the Search service applies gzip compression
        to the responses with the Accept-Encoding header.<br />
         **Value:**   `gzip`
      </td>
    </tr>
  </tbody>
</table>  
